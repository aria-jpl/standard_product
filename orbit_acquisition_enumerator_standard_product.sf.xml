<?xml version="1.0"?>
<sf:sciflo xmlns:sf="http://sciflo.jpl.nasa.gov/2006v1/sf"
        xmlns:xs="http://www.w3.org/2001/XMLSchema"
        xmlns:py="http://sciflo.jpl.nasa.gov/2006v1/py">
  <sf:flow id="aoi_acquisition_localizer_standard_product">
    <sf:title>aoi_acquisition_localizer</sf:title>
    <sf:description>Search for acquisitions over all active AOIs occuring between a date range, resolve dataset urls from acquisitions, download and extract.</sf:description>
    <sf:inputs>
      <context_file>_context.json</context_file>
    </sf:inputs>
    <sf:outputs>
      <!--<datasets from="@#enumerate"/>-->
      <project from="@#resolve_source"/>
    </sf:outputs>

    <sf:processes>

      <sf:process id="resolve_source">
        <sf:inputs>
          <context_file/>
        </sf:inputs>
        <sf:outputs>
	  <project/>
          <auto_bbox/>
	  <bbox/>
	  <dataset/>
	  <identifier/>
	  <download_url/>
	  <dataset_type/>
	  <ipf/>
	  <archive_filename/>
          <query/>
          <aoi/>
          <dem_type/>
          <spyddder_extract_version/>
          <standard_product_version/>
          <queue/>
          <priority/>
	  <preReferencePairDirection/>
          <postReferencePairDirection/>
          <temporalBaseline/>
	  <singlesceneOnly/>
	  <precise_orbit_only/>
        </sf:outputs>
        <sf:operator>
          <sf:description></sf:description>
          <sf:op>
            <sf:binding>python:?orbit_acquisition.resolve_aoi_acqs</sf:binding>
          </sf:op>
        </sf:operator>
      </sf:process>
      
<!--
      <sf:process id="enumerate">
        <sf:inputs>
	  <project from="@#previous"/>
          <auto_bbox from="@#previous"/>
	  <bbox from="@#previous"/>
          <dataset from="@#previous"/>
          <identifier from="@#previous"/>
          <download_url from="@#previous"/>
          <dataset_type from="@#previous"/>
	  <ipf from="@#previous"/>
          <archive_filename from="@#previous"/>
          <query from="@#previous"/>
          <aoi from="@#previous"/>
          <dem_type from="@#previous"/>
          <spyddder_extract_version from="@#previous"/>
          <standard_product_version from="@#previous"/>
          <queue from="@#previous"/>
          <priority from="@#previous"/>
          <preReferencePairDirection from="@#previous"/>
          <postReferencePairDirection from="@#previous"/>
          <temporalBaseline from="@#previous"/>
          <singlesceneOnly from="@#previous"/>
          <precise_orbit_only from="@#previous"/>
        </sf:inputs>
        <sf:outputs>
          <datasets/>
        </sf:outputs>
        <sf:operator>
          <sf:description></sf:description>
          <sf:op>
	    <sf:binding>python:?enumerate_acquisition.get_topsapp_cfgs_standard_product</sf:binding>
          </sf:op>
        </sf:operator>
      </sf:process>
      
      <sf:process id="submit_sling">
        <sf:inputs>
          <spyddder_extract_version from="@#previous"/>
          <queue from="@#previous"/>
          <localize_url from="@#previous"/>
          <file from="@#previous"/>
          <prod_name from="@#previous"/>
          <prod_date from="@#previous"/>
          <priority from="@#previous"/>
          <aoi from="@#previous"/>
        </sf:inputs>
        <sf:outputs>
          <datasets/>
        </sf:outputs>
        <sf:operator>
          <sf:description></sf:description>
          <sf:op>
            <sf:binding job_queue="jobs_processed" async="true">map:python:?util.submit_job</sf:binding>
          </sf:op>
        </sf:operator>
      </sf:process>
-->

    </sf:processes>
  </sf:flow>
</sf:sciflo>
